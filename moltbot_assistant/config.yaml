name: Moltbot Assistant
version: "0.3.6"
slug: moltbot_assistant
description: Run Moltbot Assistant (Clawdbot-compatible) as a Home Assistant add-on.
url: https://github.com/techartdev/ClawdHAAddOn
arch:
  - amd64
startup: services
boot: auto
init: false
hassio_api: false
homeassistant_api: false
host_network: true

# Home Assistant Ingress (UI inside the add-on page)
ingress: true
ingress_port: 8099
panel_title: Moltbot Assistant
panel_icon: mdi:robot

map:
  - addon_config:rw
options:
  telegram_bot_token: ""
  timezone: "Europe/Sofia"
  # Optional: lock DMs to specific Telegram user ids (comma-separated).
  # If set, add-on will use dmPolicy=allowlist and allowFrom=<ids>.
  telegram_allow_from: ""

  # Model selection (string like "openai-codex/gpt-5.2" or "ollama/gpt-oss:20b")
  model_primary: "openai-codex/gpt-5.2"

  # Gateway UI exposure (LAN)
  # - bind: loopback (default) or lan
  # - port: default 18789
  # - token: set to a fixed token so Control UI can connect; required if bind=lan
  gateway_bind: "loopback"
  gateway_port: 18789
  gateway_token: ""

  # Run `clawdbot doctor --fix` on startup (useful after upgrades; slows restarts)
  run_doctor_on_start: false

  homeassistant_token: ""
  # Optional: MikroTik SSH defaults (leave empty if you don't use MikroTik)
  mikrotik_host: ""
  mikrotik_ssh_user: ""
  mikrotik_ssh_key_path: "/data/keys/mikrotik"
  # Brave Search API key (optional; enables Brave-backed web search tool)
  brave_api_key: ""

  # Enable web terminal inside Home Assistant (Ingress) via ttyd
  enable_terminal: false

  # Cleanup stale session lock files left after crashes/restarts
  clean_session_locks_on_start: true
  clean_session_locks_on_exit: true


schema:
  telegram_bot_token: str
  timezone: str
  telegram_allow_from: str?
  model_primary: str
  gateway_bind: list(loopback|lan)
  gateway_port: int
  gateway_token: str?
  run_doctor_on_start: bool
  homeassistant_token: str?
  mikrotik_host: str
  mikrotik_ssh_user: str
  mikrotik_ssh_key_path: str
  brave_api_key: str?
  enable_terminal: bool?
  clean_session_locks_on_start: bool?
  clean_session_locks_on_exit: bool?

